<div>
    <label>
        Buscar Cliente 
        <input type="text" name="searchCliente" id="searchCliente" >
    </label>
</div>
<div id="actionViewModal"> Nuevo Cliente </div>
    <span id="autocompleteCliente" style="position: absolute; background-color: #009ede;">
        
    </span>

<input type="hidden" value="" id="idcliente">
<div id="tableSeachCLiente"></div>
<div>
    <label>
        Buscar Articulo 
        <input type="text" name="searchArticulo" id="searchArticulo" >
    </label>
    <span id="autocompleteArticulo" style="position: absolute; background-color: #009ede;">
        
    </span>
</div>
<table class="sticky-enabled tableSelect-processed sticky-table">
    <thead class="tableHeader-processed">
        <tr>
            <th>Nombre</th>
            <th>Descripción</th>
            <th>Precio</th>
            <th>Cantidad</th>
            <th>Total</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>articulo 1</td>
            <td>descripcion articulo 1</td>
            <td><input type="text" value="123"></td>
            <td><input type="text" value="2"></td>
            <td><input disabled="disabled" type="text" value="256"></td>
            <td>[<a href="">Eliminar</a>]</td>
        </tr>
        <tr>
            <td>articulo 1</td>
            <td>descripcion articulo 1</td>
            <td><input type="text" value="123"></td>
            <td><input type="text" value="2"></td>
            <td><input disabled="disabled" type="text" value="256"></td>
            <td>[<a href="">Eliminar</a>]</td>
        </tr>
        <tr>
            <td>articulo 1</td>
            <td>descripcion articulo 1</td>
            <td><input type="text" value="123"></td>
            <td><input type="text" value="2"></td>
            <td><input disabled="disabled" type="text" value="256"></td>
            <td>
                [<a href="">Eliminar</a>]
            </td>
        </tr>
        <tr>
            <td> </td>
            <td> </td>
            <td> </td>
            <td style="color: red; font-weight: bold"> Total General </td>
            <td style="color: red; font-weight: bold"> 738</td>
            <td> </td>
        </tr>
    </tbody>
</table>

<div>
    <label>Fecha Entrega <input type="text"></label>
    <label>Hora Entrega </label>
    <select>
    <?php foreach(range(0,23) as $index): ?>
        <option value="<?php echo $index ?>"><?php echo strlen($index)==1?'0'.$index:$index;  ?>
        </option>
            <?php endforeach; ?>
        </select>
        <select>
            <option value="00">00</option>
            <option value="15">15</option>
            <option value="30">30</option>
            <option value="45">45</option>
        </select>
    
</div>
<div>
    <label> Informacion Adicional
    <textarea>

    </textarea>
        </label>
</div>
<div>
    <label>Responsable <input type="text"></label>    
    <span> Marcelo Carranza <a href="#">x</a></span> 
</div> 
<div> [<a href="#">Enviar Pedido</a>] - [<a href="">Cancelar Pedido</a>]</div>


<div id="modalView" class="modalInActive" >
    <div id="boxes" >
    <?php echo $this->formularioCliente ?>
    </div>    
</div>

<script type="text/javascript">
    
    
    
$(function() {
    $( "#searchCliente" ).keypress(function(e) {
        if(e.which == 13){
            var valor = this.value;       
            $.ajax({
                data: "searchCliente="+valor,
                type: "POST",
                dataType: "json",
        url: "/admin/pedidos/ajax-search-clientes",
        success: function(data){ 
            $('#autocompleteCliente').empty(); 
            var contenido='';
            contenido = '<div><table>';
            for (var i = 0; i < data.length; i++) { 
                contenido = contenido + '<tr style="cursor:pointer" name="asa" id="itemCliente-'+data[i]['idcliente']+'">';
                contenido = contenido + '<td>';
                contenido = contenido + data[i]['nombre'];
                contenido = contenido + '</td>';
                contenido = contenido + '<td>';
                contenido = contenido + data[i]['apellidomaterno'] +' '+ data[i]['apellidopaterno'];
                contenido = contenido + '</td>';
                contenido = contenido + '</tr>';
                
            }
            contenido = contenido + '</table></div>';
            
            $('#autocompleteCliente').append(contenido);
        }
       });

                    }
    			})
	});
        
$(function() {


$( "#searchArticulo" ).keypress(function(e) {
    $.ajax({
        data: "searchArticulo="+valor,
        type: "POST",
        dataType: "json",
        url: "/admin/pedidos/ajax-search-articulos",
        success: function(data){
            $('#autocompleteArticulo').empty(); 
            var contenido='';
            contenido = '<div><table>';
            for (var i = 0; i < data.length; i++) { 
                contenido = contenido + '<tr style="cursor:pointer" id="item-'+data[i]['nombre']+'">';
                contenido = contenido + '<td>';
                contenido = contenido + data[i]['nombre'];
                contenido = contenido + '</td>';
                contenido = contenido + '</tr>';
            }
            contenido = contenido + '</table></div>';
            $('#autocompleteArticulo').append(contenido);
        }
        });
        })
        });
        $("[id^=itemCliente]").live("click",function(){
        var idClienteArray = this.id.split('-');
        //var idCliente = idClienteArray[1];
        mostrarCLiente(idClienteArray[1]);
        });
        
        
        function mostrarCLiente(idCliente){
        $.ajax({
        data: "idCliente="+idCliente,
        type: "POST",
        dataType: "json",
        url: "/admin/pedidos/ajax-get-cliente",
        success: function(data){
            $('#tableSeachCLiente').empty(); 
            $('#idcliente').attr('value',data['idcliente']); 
            
            var contenido='';
            contenido = '<table class="sticky-enabled tableSelect-processed sticky-table">';
            contenido = contenido +'<thead class="tableHeader-processed">';
            contenido = contenido +'<tr>';
            contenido = contenido +'<th>Nombre</th>';
            contenido = contenido +'<th>Apellidos</th>';
            contenido = contenido +'<th>Ruc</th>';
            contenido = contenido +'<th>Dirección</th>';
            contenido = contenido +'<th>Telefonos</th>';
            contenido = contenido +'<th>Dni</th>';
            contenido = contenido +'</tr>';
            contenido = contenido +'</thead>';
            contenido = contenido +'<tbody>';
            contenido = contenido +'<tr>';
            contenido = contenido +'<td>'+data['nombre']+'</td>';
            contenido = contenido +'<td>'+data['apellidomaterno']+ ' ' +data['apellidopaterno']+'</td>';
            contenido = contenido +'<td>'+data['ruc']+ '</td>';
            contenido = contenido +'<td>'+data['direccion']+ '</td>';
            contenido = contenido +'<td>'+data['telefono1']+ ' - ' +data['telefono2']+ ' - ' +data['movil']+'</td>';
            contenido = contenido +'<td>'+data['dni']+ '</td>';
            contenido = contenido +'</tr>';
            contenido = contenido +'</tbody>';
            contenido = contenido + '</table>';
            $('#tableSeachCLiente').append(contenido);
            $('#autocompleteCliente').empty(); 
        }
        });
        
        $("#actionViewModal").click(function(){
            $("modalView").attr('class','modalActive'); 
        });
}
        
	</script>